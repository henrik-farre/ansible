---
- name: Setup Zim Notebook
  git:
    repo: git@bitbucket.org:enrique/notes.git
    dest: "{{ ansible_user_dir }}/Documents/Zim"
    accept_hostkey: yes
  tags:
    - zim

- name: Ensure that the ~/.config/zim directory exists
  file:
    path: "{{ ansible_user_dir }}/.config/zim"
    owner: "{{ ansible_user_id }}"
    state: directory
    mode: 0700
  tags:
    - conky

- name: Ensure notebook config exists
  copy:
    content: |
        [NotebookList]
        Default=
        1=~/Documents/Zim/notes

        [Notebook 1]
        uri=~/Documents/Zim/notes
        name=Notes
        interwiki=None
        icon=None
    dest: "{{ ansible_user_dir }}/.config/zim/notebooks.list"
    owner: "{{ ansible_user_id }}"
    mode: 0700
  tags:
    - zim

- name: Add post commit hook
  copy:
    src: dot.git/hooks/post-commit
    dest: "{{ ansible_user_dir }}/Documents/Zim/.git/hooks/post-commit"
    owner: "{{ ansible_user_id }}"
    mode: 0700
  tags:
    - zim

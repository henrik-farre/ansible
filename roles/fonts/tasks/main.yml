---
- block:
  - name: Create .fonts dir
    file:
      path: "{{ ansible_user_dir }}/.fonts/"
      owner: "{{ ansible_user_id }}"
      state: directory
      mode: 0700
    tags:
      - fonts

  - name: Download mononoki font
    git:
      repo: https://github.com/madmalik/mononoki.git
      dest: /tmp/mononoki
      accept_hostkey: yes
    tags:
      - fonts

  # http://stackoverflow.com/a/35650167
  - name: Install mononoki font
    copy:
      src: "/tmp/mononoki/export/webfont/{{ item }}"
      dest: "{{ ansible_user_dir }}/.fonts/{{ item }}"
      remote_src: yes
    with_items:
      - "mononoki-BoldItalic.ttf"
      - "mononoki-Italic.ttf"
      - "mononoki-Bold.ttf"
      - "mononoki-Regular.ttf"
    tags:
      - fonts

  always:
  - name: Cleanup
    file:
      path: /tmp/mononoki
      state: absent
    tags:
      - fonts

---
- hosts: all
  roles:
    - hostname
    - timezone
    - ntp
    - cron
    - ssmtp
    - fstrim
    - hddtemp
    - sysctl
    - makepkg
    - ssh-keys
    - ssh-client
    - backup
    - dotfiles
    - vim
    - docker
    - php
    - { role: packages, packages: "{{ host_packages }}" }
    - { role: services, services: "{{ host_services }}" }
    - { role: packages-uninstalled, packages: "{{ host_uninstalled_packages }}" }
    - { role: packages, packages: ['smartmontools', 'lm_sensors'] }
    - { role: services, services: ['acpid', 'smartd', 'alsa-restore', 'fstrim.timer'] }

- hosts: desktop
  roles:
    - xorg
    - desktop
    - fonts
    - cinnamon
    - conky
    - zim
    - samba-client
    - node
    - firefox
    - { role: yaourt-packages, packages: "{{ aur_packages }}" }
  tasks:
    - name: Ensure files does not exist
      file:
        path: "{{ item }}"
        state: absent
      with_items:
        - "{{ansible_user_dir}}/.config/autostart/xfce4-settings-helper-autostart.desktop"
        - "{{ansible_user_dir}}/.config/autostart/xfce4-tips-autostart.desktop"
        - "{{ansible_user_dir}}/.config/autostart/xfce4-power-manager.desktop"

- hosts: laptop
  roles:
    - { role: packages, packages: ['tlp', 'tlp-rdw'] }
    - { role: services, services: ['tlp', 'tlp-sleep'] }

- hosts: macbook
  roles:
    - { role: yaourt-packages, packages: ['mbpfan-git'] }
    - { role: services, services: ['mbpfan'] }

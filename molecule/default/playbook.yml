---
- name: Converge
  become: yes
  hosts: all

  vars:
    network:
      local_domain: molecule.test

  roles:
    - pacman-mirrors
    - facts
    - locale
    - bootloader
    - mounts
    - networking
    - users
    - { role: packages, packages: ['git', 'openssh'] }
    - { role: services, services: ['sshd'] }
    - { role: virtualbox-guest, when: ansible_virtualization_type == 'virtualbox' }

- name: Converge
  hosts: all

  vars:
    network:
      local_domain: molecule.test
    email_addresses:
      external: email@test.test
      internal: email@test.test
    mail_mailhub: "smtp"
    mail_mailhub_port: 25
    mail_root: "{{ email_addresses.internal }}"
    mail_rewrite_domain: molecule.test
    mail_auth_user: some_user
    mail_auth_pass: some_pass
    groups_to_users: []

  roles:
    - hostname
    - timezone
    - ntp
    - modules
    - cron
    - system-mail
    - hddtemp
    - sysctl
    - journald
    - firewall
    - makepkg
    - sshd
    - ssh-keys
    - ssh-client
    - system-maintenance
    - global-aliases
    - misc-setup
    - xdg-dirs
    - dotfiles
    - vim
    - docker
    - php
    - fuse
    - xorg
    - lightdm
    - fonts
    - cinnamon
    - conky
    - zim
    - samba-client
    - node
    - firefox
    - xcape
    - systemd-user-units
    - terminal
    - aur-helper
    - cups
    - devilspie

---
# https://app.vagrantup.com/archlinux/boxes/archlinux
driver:
  name: vagrant
  provider:
    name: virtualbox
dependency:
  name: galaxy
platforms:
  - name: instance
    box: archlinux/archlinux
    box_version: 20201201.10292
    config_options:
      ssh.keep_alive: yes
      ssh.remote_user: "'vagrant'"
    groups:
      - archlinux
      - desktop
      - gaming
provisioner:
  name: ansible
  connection_options:
    ansible_ssh_user: vagrant
  provision: yes
  inventory:
    group_vars:
      all:
        network:
          local_domain: molecule.test
        email_addresses:
          external: email@test.test
          internal: email@test.test
        mail_mailhub: "smtp"
        mail_mailhub_port: 25
        mail_root: "{{ email_addresses.internal }}"
        mail_rewrite_domain: molecule.test
        mail_auth_user: some_user
        mail_auth_pass: some_pass
        groups_to_users:
          gamemode:
            - vagrant
        host_packages: []
        host_services: []
        host_uninstalled_packages: []
        aur_packages:
          - tangerine-icon-theme
  config_options:
    defaults:
      vault_password_file: ${MOLECULE_PROJECT_DIRECTORY}/roles/molecule-resources/vault_pass.txt
  env:
    ANSIBLE_ROLES_PATH: ${MOLECULE_PROJECT_DIRECTORY}/roles
    ANSIBLE_LIBRARY: ${MOLECULE_PROJECT_DIRECTORY}/library
  playbooks:
    prepare: ${MOLECULE_PROJECT_DIRECTORY}/roles/molecule-resources/prepare_python_archlinux.yml
lint: |
  export ANSIBLE_LIBRARY=${MOLECULE_PROJECT_DIRECTORY}/library
  set -e
  yamllint -c ${MOLECULE_PROJECT_DIRECTORY}/roles/molecule-resources/yamllint.yml .
  ansible-lint -c ${MOLECULE_PROJECT_DIRECTORY}/roles/molecule-resources/ansible-lint.yml
